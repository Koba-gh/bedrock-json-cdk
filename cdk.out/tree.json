{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.206.0"},"children":{"BedrockJsonStack":{"id":"BedrockJsonStack","path":"BedrockJsonStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.206.0"},"children":{"PCSpecsFilesBucket":{"id":"PCSpecsFilesBucket","path":"BedrockJsonStack/PCSpecsFilesBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsFilesBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"BedrockJsonStack/PCSpecsFilesBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsFilesBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PCSpecsFilesBucket4D77EF35"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["PCSpecsFilesBucket4D77EF35","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PCSpecsFilesBucket4D77EF35","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"BedrockJsonStack/PCSpecsFilesBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.206.0","metadata":[]},"children":{"Default":{"id":"Default","path":"BedrockJsonStack/PCSpecsFilesBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}}}},"Notifications":{"id":"Notifications","path":"BedrockJsonStack/PCSpecsFilesBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsFilesBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}}}},"AllowBucketNotificationsToBedrockJsonStackPCSpecsLambdaFunction13E17023":{"id":"AllowBucketNotificationsToBedrockJsonStackPCSpecsLambdaFunction13E17023","path":"BedrockJsonStack/PCSpecsFilesBucket/AllowBucketNotificationsToBedrockJsonStackPCSpecsLambdaFunction13E17023","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PCSpecsLambdaFunctionFFFBB593","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":{"Ref":"AWS::AccountId"},"sourceArn":{"Fn::GetAtt":["PCSpecsFilesBucket4D77EF35","Arn"]}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"BedrockJsonStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.206.0"},"children":{"Staging":{"id":"Staging","path":"BedrockJsonStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.206.0"}},"Role":{"id":"Role","path":"BedrockJsonStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}},"Handler":{"id":"Handler","path":"BedrockJsonStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}}}},"PCSpecsTable":{"id":"PCSpecsTable","path":"BedrockJsonStack/PCSpecsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"name","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"name","keyType":"HASH"}]}}},"ScalingRole":{"id":"ScalingRole","path":"BedrockJsonStack/PCSpecsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}}}},"PCSpecsLambdaRole":{"id":"PCSpecsLambdaRole","path":"BedrockJsonStack/PCSpecsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportPCSpecsLambdaRole":{"id":"ImportPCSpecsLambdaRole","path":"BedrockJsonStack/PCSpecsLambdaRole/ImportPCSpecsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BedrockJsonStack/PCSpecsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:ListBucket"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PCSpecsFilesBucket4D77EF35","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PCSpecsFilesBucket4D77EF35","Arn"]},"/*"]]}]},{"Action":["dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PCSpecsTable4949BFF7","Arn"]}},{"Action":["bedrock-runtime:Converse","bedrock-runtime:InvokeModel","bedrock:InvokeModel"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"PCSpecsLambdaRoleDefaultPolicyEE43459B","roles":[{"Ref":"PCSpecsLambdaRole55A9E2BA"}]}}}}}}},"PCSpecsLambdaLayer":{"id":"PCSpecsLambdaLayer","path":"BedrockJsonStack/PCSpecsLambdaLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.206.0","metadata":[]},"children":{"Code":{"id":"Code","path":"BedrockJsonStack/PCSpecsLambdaLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.206.0"},"children":{"Stage":{"id":"Stage","path":"BedrockJsonStack/PCSpecsLambdaLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.206.0"}},"AssetBucket":{"id":"AssetBucket","path":"BedrockJsonStack/PCSpecsLambdaLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.206.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsLambdaLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c9ab5952dec44fe3ac2daea1b40c7a9bd9e9c96cde0fb09ce91cc4ed67fe538d.zip"},"description":"Layer containing dependencies for file processing"}}}}},"PCSpecsLambdaFunction":{"id":"PCSpecsLambdaFunction","path":"BedrockJsonStack/PCSpecsLambdaFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.206.0","metadata":[]},"children":{"Code":{"id":"Code","path":"BedrockJsonStack/PCSpecsLambdaFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.206.0"},"children":{"Stage":{"id":"Stage","path":"BedrockJsonStack/PCSpecsLambdaFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.206.0"}},"AssetBucket":{"id":"AssetBucket","path":"BedrockJsonStack/PCSpecsLambdaFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.206.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BedrockJsonStack/PCSpecsLambdaFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c9ab5952dec44fe3ac2daea1b40c7a9bd9e9c96cde0fb09ce91cc4ed67fe538d.zip"},"environment":{"variables":{"DYNAMODB_TABLE_NAME":{"Ref":"PCSpecsTable4949BFF7"},"BEDROCK_MODEL_ID":"us.anthropic.claude-sonnet-4-20250514-v1:0"}},"handler":"index.handler","layers":[{"Ref":"PCSpecsLambdaLayer1B7168E2"}],"memorySize":512,"role":{"Fn::GetAtt":["PCSpecsLambdaRole55A9E2BA","Arn"]},"runtime":"python3.11","timeout":60}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"BedrockJsonStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BedrockJsonStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"BedrockJsonStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}},"Condition":{"id":"Condition","path":"BedrockJsonStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.206.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BedrockJsonStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.206.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BedrockJsonStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.206.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}